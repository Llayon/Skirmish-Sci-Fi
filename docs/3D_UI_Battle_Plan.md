# План улучшения 3D UI в бою

## Цели
- Сделать 3D-вид в бою визуально эстетичным и читаемым.
- Сделать управление камерой понятным и предсказуемым.
- Не жертвовать производительностью и стабильностью.

## 1) Визуальный стиль
- Определить целевую эстетику: sci‑fi, мягкий неон, стекло/blur, минимализм.
- Зафиксировать палитру: фон сцены, нейтральные поверхности, акцентные цвета фракций, цвет опасности.
- Зафиксировать правила контраста: читаемость текста и маркеров на тёмном фоне.
- Согласовать общие UI-константы: радиусы, тени, плотность, длительности анимаций.

## 2) Камера и навигация
- Режимы камеры:
  - Tactical: изометрия по умолчанию.
  - Cinematic: более низкий угол, мягкие dolly/панорама.
- Кнопки управления:
  - Сброс камеры.
  - Фокус на активном/выбранном юните.
  - Переключение “Следовать за активным”.
- Автоподстройка: стартовый кадр под размер карты и текущую фазу.
- Настройки управления:
  - Скорость зума/панорамы.
  - Инверсия колеса.
  - Ограничения наклона/зума по умолчанию.
- Подсказка управления:
  - Мини‑подсказка в углу.
  - Расширенная “?” панель со схемой мыши/клавиш.

## 3) Свет, фон, атмосфера
- Структура освещения:
  - Key light + fill light + rim light.
  - Мягкие тени с адекватными параметрами.
- Фон и атмосферная глубина:
  - Fog/haze на дальних объектах.
  - Корректный тон-маппинг/экспозиция (избавиться от “всё тёмное”).
- Пост‑эффекты (опционально, с настройками качества):
  - Умеренный bloom для акцентных элементов.
  - Лёгкая виньетка/контраст (минимально).

## 4) Материалы и читаемость сцены
- Пол/сетка:
  - Слойная сетка: крупная + мелкая, разная прозрачность.
  - Subtle noise/градиент для живости без “шума”.
- Terrain:
  - Единый визуальный язык для типов: cover/impassable/door/interior/area.
  - Лёгкий bevel/edge highlight для читаемости форм.
- Юниты:
  - Визуально различимые фракции (цвет/свечение/маркер).
  - Обозначения статусов (stunned/dazed/casualty) аккуратными иконками/обводками.

## 5) 3D-оверлеи в мире (world-space HUD)
- Выделение:
  - Selection ring для выбранного.
  - Active ring для активного.
  - Hover outline.
- Перемещение:
  - Путь в 3D: “лента”/стрелка по клеткам.
  - Доступные клетки: мягкий подсвет без визуального мусора.
- Стрельба:
  - Линия прицеливания и индикатор LoS/cover.
  - Мини‑tooltip возле цели: targetNumber/шанс.

## 6) 2D-HUD поверх сцены (layout)
- Правильные слои:
  - 3D Canvas (фон) → 2D UI (панели) → подсказки.
- Режим “чистый 3D”:
  - Переключатель “UI минимальный / полный”.
  - Автоскрытие второстепенных панелей в момент действий/анимаций.
- Приведение панелей к единому стилю:
  - Battle Log: компактный режим, прозрачность/blur, удобная свёртка.
  - Панель миссии/фазы: легче визуально, не перекрывает центр.

## 7) UX и интерактивность
- Клики и попадание по юнитам:
  - Увеличить хитбоксы/коллайдеры для raycast.
  - Приоритет клика по юниту над клеткой.
- Визуальные реакции:
  - Hover подсвет.
  - Click feedback.
- Горячие клавиши:
  - R — сброс камеры.
  - F — фокус на выбранном.
  - Tab — цикл по юнитам.
  - Esc — отмена действия.

## 8) Производительность и качество
- Оптимизации:
  - Instancing для повторяющихся объектов.
  - LOD/упрощение на дальних.
  - Ограничение пост‑эффектов на слабых GPU.
- Профили качества:
  - Low/Med/High для теней/AA/bloom.

## 9) Тестирование и валидация
- Автотесты:
  - 3D занимает 100% контейнера.
  - Переключатель 2D/3D не “залипает” после действий/анимаций.
- Ручные сценарии:
  - Solo/multiplayer.
  - Ходы врагов.
  - Анимации move/shoot.
  - Переходы фаз.
  - Разные разрешения/соотношения сторон.

## 10) Артефакты и критерии готовности
- Скриншоты “до/после” для нескольких боёв.
- Чеклист UI/UX для последующих улучшений.
- Критерии:
  - Камера управляется предсказуемо.
  - Сцена читаемая (видно пол, укрытия, юниты, выделения).
  - UI не “затемняет” сцену и не мешает кликам.
  - FPS стабильный на типовых картах.

